# GHOST Simulator
See https://jimmytech.notion.site/Ghost-de748728e51a453288c075e56b2c64e3 for the computer specifications and instruction set

## Operation
### Requires `pygame` through pip
### Requires `numpy` through pip
### Requires `./instructionSet.py`, generated by the Downloaders

Executes `main.hex` or the first argument

This script loads a pygame window with 3 controls (from left to right): Power, Clock, and Reset
The Power switch turns the automatic clock on and off (TODO: Speed control)
The clock button increments the clock by one to step through the program
The reset button resets the registers, counters, and stack pointers, but not the program memory (TODO?)

It fetches each instruction from memory, checks it against the instruction set, and does the operations defined in an ugly el/if tower. Note that all jump or similar instructions set the program counter to one less than expected, because it is incremented regardless of instruction. It will exit with `ERR:X` if an instruction is loaded that is not in the if tower. Usually this means that an istruction in the set has not yet been implemented, but an attempt has been made to use it. If it attempts to run data as an instruction (The hex is not found the set), then it will throw a KeyError. (TODO: Silently, sneakily fail, or maybe throw up a warning)

Keybinds:
 + `/` Prints out the registers, counters, stack pointers, and memory
 + `s` Prints out Stack 1 (See Memory Mapping on Notion)
 + `d` Prints out Stack 2
 + `SPACE` Advances the clock by one
 + (TODO: Add keypress to toggle power switch state)

For use with a profiler, set `timingMode` (Line 108) to True. This will automatically turn the power on and exit on halt. The function `go()` was created so that you can tell in the profiler what calls are repetetive and what calls are one-time or setup related

Unfortunately, this simulator does not use microcode, as the performance of microcode implementations previously attempted has been dismal. To make it possible to render to the display, it just evaluates the instructions.

# Please add issues for feature requests, instruction set requests, bugs, etc...
While this is my fourth attempt at this, I still don't fully understand how _real_ assembly works, so I might have misunderstood some basic concepts. Feel free to let me know!
